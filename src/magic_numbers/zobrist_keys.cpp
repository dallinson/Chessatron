#include "../zobrist_hashing.hpp"

// Normally these would be randomly generated at runtime with a PRNG; to ensure different PRNGs don't affect it they're included precomputed
constexpr std::array<ZobristKey, 64 * 12> ZobristKeys::PositionKeys = {
    6004979459829542343ull,  575228772519342402ull,   5806056339682094430ull,  8920438500019044156ull,  1872523786854905556ull,
    7168173152291242201ull,  9388215746117386743ull,  8767779863385330152ull,  1489771135892281206ull,  17385502867130851733ull,
    15762364259840250620ull, 2649182342564336630ull,  13505777571156529898ull, 928423270205194457ull,   11861585534482611396ull,
    16833723316851456313ull, 2875176145464482879ull,  9598842341590061041ull,  6103491276194240627ull,  8264435384771931435ull,
    17191732074717978439ull, 11134495390804798113ull, 8118948727165493749ull,  17994305203349779906ull, 9778408473133385649ull,
    11774350857553791160ull, 12559012443159756018ull, 1810658488341658557ull,  9781539968129051369ull,  658149708018956377ull,
    18376927623552767184ull, 10225665576382809422ull, 11247233359009848457ull, 12966474917842991341ull, 4111328737826509899ull,
    6628917895947053289ull,  2166287019647928708ull,  11129710491401161907ull, 5728850993485642500ull,  7135057069693417668ull,
    2409960466139986440ull,  6600979542443030540ull,  5794634036844991298ull,  1765885809474863574ull,  7278670237115156036ull,
    16128398739451409575ull, 17262998572099182834ull, 8877430296282562796ull,  13401997949814268483ull, 407550088776850295ull,
    13080877114316753525ull, 5365205568318698487ull,  14935709793025404810ull, 17669982663530100772ull, 4357691132969283455ull,
    17142609481641189533ull, 8763584794241613617ull,  9679198277270145676ull,  10941274620888120179ull, 11693142871022667058ull,
    306186389089741728ull,   10524424786855933342ull, 8136607301146677452ull,  8332101422058904765ull,  11329126462075137345ull,
    3096006490854172103ull,  4961560858198160711ull,  11247167491742853858ull, 8467686926187236489ull,  3643601464190828991ull,
    1133690081497064057ull,  16733846313379782858ull, 972344712846728208ull,   1875810966947487789ull,  10810281711139472304ull,
    14997549008232787669ull, 4665150172008230450ull,  77499164859392917ull,    6752165915987794405ull,  2566923340161161676ull,
    419294011261754017ull,   7466832458773678449ull,  8379435287740149003ull,  9012210492721573360ull,  9423624571218474956ull,
    17519441378370680940ull, 3680699783482293222ull,  5454859592240567363ull,  12278110483549868284ull, 10213487357180498955ull,
    9786892961111839255ull,  1870057424550439649ull,  13018552956850641599ull, 8864492181390654148ull,  14503047275519531101ull,
    2642043227856860416ull,  5521189128215049287ull,  1488034881489406017ull,  12041389016824462739ull, 236592455471957263ull,
    7168370738516443200ull,  707553987122498196ull,   3852097769995099451ull,  8313129892476901923ull,  1761594034649645067ull,
    2291114854896829159ull,  15208840396761949525ull, 13805854893277020740ull, 11490038688513304612ull, 5903053950100844597ull,
    6666107027411611898ull,  18228317886339920449ull, 3626425922614869470ull,  10120929114188361845ull, 13383691520091894759ull,
    9148094160140652064ull,  1284939680052264319ull,  7307368198934274627ull,  5611679697977124792ull,  10869036679776403037ull,
    4819485793530191663ull,  7866624006794876513ull,  4794093907474700625ull,  6849775302623042486ull,  4177248038373896072ull,
    10648116955499083915ull, 7195685255425235832ull,  17012007340428799350ull, 11573842626212501214ull, 18049927275724560211ull,
    15471783285232223897ull, 16134745906572777443ull, 13149419803421182712ull, 14564139292183438565ull, 2088698177441502777ull,
    15099871677732932330ull, 5679318949880730421ull,  16491038769688081874ull, 1684901764271550206ull,  6019498834983443029ull,
    8308552077872645018ull,  2774412133178445207ull,  2993471197969887147ull,  8756104692490586069ull,  7404378077533100169ull,
    11391825116471223489ull, 17128408637045999621ull, 5816122712455824169ull,  5531291136777113635ull,  7400684525794093602ull,
    2421696223438995901ull,  2746718911238191773ull,  2297623779240041360ull,  15514986454711725499ull, 13355177993350187464ull,
    2151598180055853022ull,  14933732441462847914ull, 17651243408385815107ull, 4086544267540179726ull,  3960368502933186560ull,
    16948614951473504462ull, 11262612224635188739ull, 12613511070148831882ull, 2706199935239343179ull,  10054459213633325149ull,
    17640957734094436437ull, 15290986714861486531ull, 16616573458614039565ull, 2626432152093131908ull,  14024745482209308341ull,
    12344195406125417964ull, 7167044992416702836ull,  11933989054878784040ull, 1255659969011027721ull,  3240842176865726111ull,
    795178308456769763ull,   12389083385239203825ull, 6408553047871587981ull,  14331996049216472800ull, 3362936192376505047ull,
    1486633608756523830ull,  8937438391818961808ull,  15513702763578092231ull, 9242607645174922067ull,  16999375738341892551ull,
    225631029947824688ull,   5294122026845313316ull,  11666909141406975304ull, 6576914768872977647ull,  13014342141693467190ull,
    15296769519938257969ull, 1344590668019013826ull,  15724940538984617905ull, 15915014237009546277ull, 3928039610514994951ull,
    14873195079178728329ull, 12362539403674935092ull, 4869881251581666789ull,  12986343614603388393ull, 1215083005313393810ull,
    15835354158744478399ull, 11186056805483324290ull, 13149236123055901828ull, 13821214860367539280ull, 12182689304549523133ull,
    2305696533800337221ull,  12399248800711438055ull, 12612571074767202621ull, 1949121388445288260ull,  13067734303660960050ull,
    14085928898807657146ull, 14099042149407050217ull, 17561987301945706495ull, 11512458344154956250ull, 7437568954088789707ull,
    7915171836405846582ull,  11752651295154297649ull, 520574178807700830ull,   9984063241072378277ull,  16254155646211095029ull,
    8412807604418121470ull,  5609875541891257226ull,  11323858615586018348ull, 8376971840073549054ull,  1383314287233606303ull,
    15474222835752021056ull, 5204145074798490767ull,  2167677454434536938ull,  10341418833443722943ull, 8271005071015654673ull,
    15537457915439920220ull, 10730891177390075310ull, 11511496483171570656ull, 16026237624051288806ull, 11839117319019400126ull,
    11321351259605636133ull, 5895970210948560438ull,  3447475526873961356ull,  7334775646005305872ull,  15954460007382865005ull,
    6939292427400212706ull,  8334626163711782046ull,  1912937584935571784ull,  12304971244567641760ull, 8524679326357320614ull,
    2204997376562282123ull,  3197166419597805379ull,  4220875528993937793ull,  2803169229572255230ull,  5085503808422584221ull,
    14444799216525086860ull, 4570145336765972565ull,  9186432380899140933ull,  11239615222781363662ull, 9872907954749725788ull,
    10369691348610460342ull, 14215600671451202638ull, 8710936142583354014ull,  18346051800474256890ull, 629718674134230549ull,
    10598630096540703438ull, 10666243034611769205ull, 16077181743459442704ull, 4303848835390748061ull,  15183795910155040575ull,
    17843919060799288312ull, 15561328988693261185ull, 15662367820628426663ull, 3706272247737428199ull,  12051713806767926385ull,
    11742603550742019509ull, 5704473791139820979ull,  9787307967224182873ull,  1637612482787097121ull,  8908762506463270222ull,
    17556853009980515212ull, 4157033003383749538ull,  18207866109112763428ull, 1800584982121391508ull,  5477894166363593411ull,
    4674885479076762381ull,  10160025381792793281ull, 7550910419722901151ull,  8799727354050345442ull,  11321311575067810671ull,
    4039979115090434978ull,  3605513501649795505ull,  3876110682321388426ull,  12180869515786039217ull, 8620494007958685373ull,
    5854220346205463345ull,  4855373848161890066ull,  15654983601351599195ull, 5949110547793674363ull,  5957016279979211145ull,
    11321480117988196211ull, 8228060533160592200ull,  2094843038752308887ull,  8801329274201873314ull,  297395810205168342ull,
    6489982145962516640ull,  925952168551929496ull,   6268205602454985292ull,  2903841526205938350ull,  359914117944187339ull,
    8371662176944962179ull,  11139146693264846140ull, 9807576242525944290ull,  5795683315677088036ull,  12688959799593560697ull,
    1070089889651807102ull,  6778454470502372484ull,  17760055623755082862ull, 1983224895012736197ull,  15760908081339863073ull,
    942692161281275413ull,   12134286529149333529ull, 10647676541963177979ull, 11090026030168016689ull, 5245566602671237210ull,
    6215931344642484877ull,  17270261617132277633ull, 13484155073233549231ull, 5040091220514117480ull,  10596830237594186850ull,
    18403699292185779873ull, 12565676100625672816ull, 15937214097180383484ull, 9145986266726084057ull,  2521545561146285852ull,
    14490332804203256105ull, 9262732965782291301ull,  16052069408498386422ull, 2012514900658959106ull,  4851386166840481282ull,
    12292183054157138810ull, 12139508679861857878ull, 7319524202191393198ull,  16056131139463546102ull, 2445601317840807269ull,
    12976440137245871676ull, 10500241373960823632ull, 1211454228928495690ull,  2931510483461322717ull,  14252799396886324310ull,
    6217490319246239553ull,  3253094721785420467ull,  11224557480718216148ull, 17235000084441506492ull, 12619159779355142232ull,
    5189293263797206570ull,  12606612515749494339ull, 1850950425290819967ull,  5933835573330569280ull,  17649737671476307696ull,
    1240625309976189683ull,  13611516503114563861ull, 11359244008442730831ull, 463713201815588887ull,   5603848033623546396ull,
    5837679654670194627ull,  13869467824702862516ull, 13001586210446667388ull, 12934789215927278727ull, 2422944928445377056ull,
    3310549754053175887ull,  8519766042450553085ull,  17839818495653611168ull, 15503797852889124145ull, 16011257830124405835ull,
    862037678550916899ull,   3197637623672940211ull,  5210919022407409764ull,  14971170165545012763ull, 12708212522875260313ull,
    11160345150269715688ull, 11888460494489868490ull, 16669255491632516726ull, 7618258446600650238ull,  17993489941568846998ull,
    18188493901990876667ull, 11270342415364539415ull, 10288892439142166224ull, 7423022476929853822ull,  2573542046251205823ull,
    14064986013008197277ull, 5122261027125484554ull,  12166444546397347981ull, 392580029432520891ull,   13077660124902070727ull,
    16778702188287612735ull, 3451078315256158032ull,  1238907336018749328ull,  9205113463181886956ull,  1667962162104261376ull,
    10830753981784044039ull, 4479827962372740717ull,  13723669708721922220ull, 17895945165757891767ull, 5275192813757817777ull,
    2148246364622112874ull,  2290795724393258885ull,  18193581350273252090ull, 1776293542351822525ull,  14757011774120772237ull,
    4313244667902787366ull,  12281515972708701602ull, 16810874891151093887ull, 13231770820477907822ull, 15338037979535853741ull,
    3321611548688927336ull,  3305807524324674332ull,  13385011844708802686ull, 7248312053715383136ull,  10692263740491040132ull,
    15834887971838928217ull, 15164530629649278767ull, 9112428691881135949ull,  7848957776938116907ull,  10951816186743012388ull,
    8896660382367628050ull,  9603906275513256852ull,  8762207035762213579ull,  14987444343672838948ull, 9409751230138127831ull,
    10591026249259463665ull, 7197363620976276483ull,  14301381657157454364ull, 6373588016705149671ull,  685071415365890925ull,
    11485719029193745472ull, 11525714121369126191ull, 16463451990009075596ull, 16713578179004591821ull, 6251124536988276734ull,
    6144308296388004591ull,  8880818733894805775ull,  1303007271453773655ull,  9174156641096830119ull,  8824404812019774483ull,
    4420129794615782201ull,  9951556838786075828ull,  8883975763174874978ull,  10736884308676275715ull, 5595889224692918441ull,
    4306406647446967767ull,  6704191827946442961ull,  9195534799547011879ull,  9195060651485531055ull,  6368791473535302177ull,
    3229483537647869491ull,  15232282204279634326ull, 928484295759785709ull,   1909608352012281665ull,  10412093924024305118ull,
    5773445318897257735ull,  3990834569972524777ull,  10771395766813261646ull, 4209783265310087306ull,  15318153364378526533ull,
    616435239304311520ull,   17961392050318287288ull, 7798983577523272147ull,  3913469721920333102ull,  15424667983992144418ull,
    6239239264182308800ull,  1654244791516730287ull,  17228895932005785491ull, 6221161860315361832ull,  17056602083001532789ull,
    13458912522609437003ull, 12917665617485216338ull, 7337288846716161725ull,  13022188282781700578ull, 12979943748599740071ull,
    510457344639386445ull,   8796640079689568245ull,  13565008864486958290ull, 6465331256500611624ull,  11031297210088248644ull,
    8017026739316632057ull,  3627975979343775636ull,  15052215649796371267ull, 6222903725779446311ull,  3527832623857636372ull,
    15597050972685397327ull, 8924250025456295612ull,  14400806714161458836ull, 10699110515857614396ull, 14468157413083537247ull,
    4223238849618215370ull,  15681850266533497060ull, 1140009269240963018ull,  12966521765762216121ull, 12695701950206930564ull,
    3881319844097050799ull,  16858671235974049358ull, 17004178443650550617ull, 10544522896658866816ull, 13378871666599081203ull,
    7580967567056532817ull,  14279886347066493375ull, 14791316027199525482ull, 13540141887354822347ull, 15889873206108611120ull,
    13441296750672675768ull, 11798467976251859403ull, 16858792058461978657ull, 704784010218719535ull,   9596982322589424841ull,
    9297677921824001878ull,  687173692492309888ull,   8070015023023620019ull,  15994912017468668362ull, 7264555371116116147ull,
    638838107884199779ull,   612060626599877907ull,   16368581545287660539ull, 2028126038944990910ull,  8217932366665821866ull,
    12715716898990721499ull, 4917760284400488853ull,  4689038209317479950ull,  15570055495392019914ull, 7353589116749496814ull,
    6461588461223219363ull,  16737230234434607639ull, 10643751583066909176ull, 13889371344374910415ull, 14623784806974468748ull,
    6280119077769544053ull,  5795026310427216669ull,  15581542564775929183ull, 5344020438314994897ull,  17090582320435646615ull,
    13070392342864893666ull, 2499216570383001617ull,  5973851566933180981ull,  11163195574208743088ull, 10686881252049739702ull,
    7802414647854227001ull,  7696730671131205892ull,  11939552629336260711ull, 8954801150602803298ull,  5805966293032425995ull,
    10608482480047230587ull, 4997389530575201269ull,  7710978612650642680ull,  7716832357345836839ull,  15123312752564224361ull,
    16000314919358148208ull, 5766400084981923062ull,  11245886267645737076ull, 8713884558928322285ull,  7910921931260759656ull,
    17192478743862940141ull, 3651028258442904531ull,  4208705969817343911ull,  3568641929344250749ull,  7493701010274154640ull,
    2245920858524015772ull,  13159017457951468389ull, 12290633441485835508ull, 17599068061438200851ull, 18107352842948477138ull,
    3841784002685309084ull,  3972025232192455038ull,  7780701379940603769ull,  14773200954226001784ull, 16368109790951669962ull,
    11498059885876068682ull, 331717439817162336ull,   18209951341142539931ull, 639100052003347099ull,   10347169565922244001ull,
    13093097841025825382ull, 8870296219354404ull,     1763076921063072981ull,  11710831831040350446ull, 11042296215092253456ull,
    12923501896423220822ull, 2679459049130362043ull,  15149139477832742400ull, 2006921612949215342ull,  2441159149980359103ull,
    4254066403785111886ull,  10165995291879048302ull, 17968517685540419316ull, 4067155115498534723ull,  14584673823956990486ull,
    7262306400971602773ull,  2599246507224983677ull,  1183331494191622178ull,  9203696637336472112ull,  8684305384778066392ull,
    452576500022594089ull,   7158260433795827572ull,  5749101480176103715ull,  2141838636388669305ull,  13319697665469568251ull,
    11739738846189583585ull, 15704600611932076809ull, 17288566729036156523ull, 3345333136360207999ull,  12225668941959679643ull,
    13135848755558586049ull, 8127707564878445808ull,  11020438739076919854ull, 13800233257954351967ull, 10719452353263111411ull,
    4467639418469323241ull,  13341252870622785523ull, 7043015398453076736ull,  13802777531561938248ull, 2597087673064131360ull,
    18196619797102886407ull, 17222554220133987378ull, 11603572837337492490ull, 9373650498706682568ull,  15247985213323458255ull,
    2826050093225892884ull,  7047939442312345917ull,  1975862676241125979ull,  8471065344236531211ull,  10781433328192619353ull,
    12710259184248419661ull, 6983092299355911633ull,  8891398163252015007ull,  18232837537224201402ull, 10128874404256367960ull,
    1184291664448112016ull,  8752186474456668498ull,  11883874832968622155ull, 8304258407043758711ull,  13031437632736158055ull,
    11394657882570178521ull, 11346359947151974253ull, 15207539437603825135ull, 6743071165850287963ull,  1895531807983368793ull,
    6176181444192939950ull,  13286219625023629664ull, 14609847597738937780ull, 15778618041730427743ull, 13113915167160321176ull,
    3534397173597697283ull,  16753315048725296654ull, 2378655170733740360ull,  17894101054940110861ull, 551298419243755034ull,
    14177640314441820846ull, 18011171644070679608ull, 1942137629605578202ull,  17704970308598820532ull, 10820688583425137796ull,
    319261663834750185ull,   17320020179565189708ull, 10828766552733203588ull, 11254165892366229437ull, 5921710089078452638ull,
    1692791583615940497ull,  3154220012138640370ull,  2462272376968205830ull,  5215882904155809664ull,  9063345109742779520ull,
    10012495044321978752ull, 2282028593076952567ull,  16490284710305269338ull, 11358175869672944140ull, 2648366387851958704ull,
    2535530668932196013ull,  15386192992268326902ull, 6797681746413993003ull,  9131737009282615627ull,  744965241806492274ull,
    15534171479957703942ull, 11406512201534848823ull, 1724859165393741376ull,  2131804225590070214ull,  10649852818715990109ull,
    7348272751505534329ull,  15418610264624661717ull, 14030296408486517359ull, 6426639016335384064ull,  14857241317133980380ull,
    8982836549816060296ull,  2847738978322528776ull,  14275200949057556108ull, 1517491100508351526ull,  11487065943069529588ull,
    7252270709068430025ull,  1454069630547688509ull,  879136823698237927ull,   764541931096396549ull,   16628452526739142958ull,
    8210570252116953863ull,  17419012767447246106ull, 16656819168530874484ull, 10879562253146277412ull, 9340840147615694245ull,
    6892625624787444041ull,  6239858431661771035ull,  10484131262376733793ull, 15135908441777759839ull, 2526013881820679475ull,
    4894708394808468861ull,  4217798054095379555ull,  2415982786774940751ull,  2008219703699744969ull,  6034935405124924712ull,
    16377935039880138091ull, 15469949637801139582ull, 6813989660423069229ull,  3171782229498906237ull,  12757488664123869734ull,
    4587441767303016857ull,  1011542511767058351ull,  1218420902424652599ull,  11452069637570869555ull, 15332250653395824223ull,
    9318912313336593440ull,  10499356348280572422ull, 17042034373048666488ull, 1805505087651779950ull,  13083730121955101027ull,
    9926866826056072641ull,  12395083137174176754ull, 13014086693993705056ull, 18092419734315653769ull, 4496402702769466389ull,
    4275128525646469625ull,  16718947186147009622ull, 2644524053331857687ull,  16665345306739798209ull, 756689505943647349ull,
    6332958748006341455ull,  5397518675852254155ull,  3282372277507744968ull,  15124857616913606283ull, 9958173582926173484ull,
    550475751710050266ull,   9535384695938759828ull,  11027794851313865315ull, 1895999114042080393ull,  17795970715748483584ull,
    3512907883609256988ull,  10170876972722661254ull, 5100888107877796098ull,  14766188770308692257ull, 5664728055166256274ull,
    1867780161745570575ull,  5069314540135811628ull,  10826357501146152497ull, 8428576418859462269ull,  6489498281288268568ull,
    248384571951887537ull,   14408891171920865889ull, 3830179243734057519ull,  10976374785232997173ull, 12375273678367885408ull,
    14917570089431431088ull, 5317296011783481118ull,  8812437177215009958ull,  15702128452263965086ull, 1418237564682130775ull,
    8287918193617750527ull,  5641726496814939044ull,  18399300296243087930ull,

};

constexpr ZobristKey ZobristKeys::SideToMove = 17930561480947107081ull;

/**
 * @brief There are 8 possible en passant files, however this program uses file 9 as a placeholder for no en passant being possible.  By setting
 * elements 8 and 9 to 0 , this enables slightly easier Zobrist hashing
 *
 */
constexpr std::array<ZobristKey, 10> ZobristKeys::EnPassantKeys = {8127998803539291684ull,
                                                                   16292452481085749975ull,
                                                                   16488107566197090ull,
                                                                   2060923303336906913ull,
                                                                   14929791059677233801ull,
                                                                   15052228947759922034ull,
                                                                   8630622898638529667ull,
                                                                   7467898009369859339ull,
                                                                   0ull,
                                                                   0ull};

constexpr std::array<ZobristKey, 16> ZobristKeys::EnPassantCheckBitboards = {
    33554432ull,       83886080ull,        167772160ull,       335544320ull,
    671088640ull,      1342177280ull,      2684354560ull,      1073741824ull,

    33554432ull << 8,  83886080ull << 8,   167772160ull << 8,  335544320ull << 8,
    671088640ull << 8, 1342177280ull << 8, 2684354560ull << 8, 1073741824ull << 8};

constexpr std::array<ZobristKey, 4> ZobristKeys::CastlingKeys = {3591372000141165328ull, 11925077963498648480ull, 17394508730963952016ull,
                                                                 2231224496660291273ull};